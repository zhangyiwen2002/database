{"version":3,"file":"static/js/289.3ddfee37.js","mappings":"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","sources":["webpack://demo/./src/components/home/index.vue","webpack://demo/./src/NetWork/clockIn.js","webpack://demo/src/components/home/index.vue","webpack://demo/./src/components/home/index.vue?adeb","webpack://demo/./src/components/home/index.vue?e0ac","webpack://demo/./src/store/store.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"DemoIndex\"}},[_c('van-calendar',{attrs:{\"title\":\"快来学习打卡吧\",\"poppable\":false,\"show-confirm\":false,\"min-date\":_vm.maxDate,\"max-date\":_vm.maxDate,\"formatter\":_vm.formatter}}),_c('div',{staticClass:\"month\"},[_vm._v(\" 本月已学习打卡\"),_c('span',[_vm._v(_vm._s(_vm.days))]),_vm._v(\"天 \")]),_c('div',{staticClass:\"total\"},[_vm._v(\" 已累计学习打卡\"),_c('span',{domProps:{\"textContent\":_vm._s(_vm.records.length)}}),_vm._v(\"天 \")]),_c('div',{staticClass:\"button\"},[(_vm.isClockIn)?_c('van-button',{attrs:{\"round\":\"\",\"type\":\"warning\",\"size\":\"large\",\"disabled\":\"\"}},[_vm._v(\"今日已打卡\")]):_c('van-button',{attrs:{\"round\":\"\",\"type\":\"warning\",\"size\":\"large\"},on:{\"click\":function($event){return _vm.clockIn()}}},[_vm._v(\"我要打卡\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from \"axios\";\r\naxios.defaults.baseURL='http://47.92.77.49:8080/';\r\naxios.defaults.timeout=50000;\r\nfunction clockIn(id){\r\n    return new Promise((resolve, reject) => {\r\n        \r\n            const params = new URLSearchParams();\r\n            params.append('userId',id);\r\n            params.append('date',new Date());\r\n            axios({\r\n                method:'post',\r\n                url:'clockin/',\r\n                headers: {\r\n                'Content-Type': 'application/x-www-form-urlencoded'\r\n                },\r\n                data:params\r\n            }).then(res=>{\r\n                resolve(res)\r\n            }).catch(err => {\r\n                reject(err)\r\n            })\r\n        }\r\n    )\r\n}\r\nfunction getUserRecords(id){\r\n    return new Promise((resolve, reject) => {\r\n        axios({\r\n            method:'get',\r\n            url:'clockin/records'+'?userId='+id,\r\n            headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n            },\r\n        }).then(res=>{\r\n            resolve(res)\r\n        }).catch(err => {\r\n            reject(err)\r\n        })\r\n   })\r\n}\r\nexport{\r\n    clockIn,getUserRecords\r\n}","<template>\r\n  <div id=\"DemoIndex\">\r\n    <van-calendar\r\n      title=\"快来学习打卡吧\"\r\n      :poppable=\"false\"\r\n      :show-confirm=\"false\"\r\n      :min-date=\"maxDate\"\r\n      :max-date=\"maxDate\"\r\n      :formatter=\"formatter\"\r\n    ></van-calendar>\r\n    <div class=\"month\">\r\n      本月已学习打卡<span>{{ days }}</span\r\n      >天\r\n    </div>\r\n    <div class=\"total\">\r\n      已累计学习打卡<span v-text=\"records.length\"></span>天\r\n    </div>\r\n    <div class=\"button\">\r\n      <van-button round type=\"warning\" size=\"large\" disabled v-if=\"isClockIn\"\r\n        >今日已打卡</van-button\r\n      >\r\n      <van-button round type=\"warning\" size=\"large\" v-else @click=\"clockIn()\"\r\n        >我要打卡</van-button\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { store } from \"@/store/store\";\r\nimport { clockIn } from \"../../NetWork/clockIn\";\r\nimport { getUserRecords } from \"../../NetWork/clockIn\";\r\nexport default {\r\n  name: \"DemoIndex\",\r\n  async created() {\r\n    if (store.state.id != \"\") {\r\n      await getUserRecords(store.state.id).then((res) => {\r\n        console.log(res);\r\n        this.records = res.data.data;\r\n        for (let i = 0; i < this.records.length; i++) {\r\n          let d = new Date(this.records[i]);\r\n          if (\r\n            d.getFullYear() == this.maxDate.getFullYear() &&\r\n            d.getMonth() == this.maxDate.getMonth()\r\n          ) {\r\n            this.days++;\r\n            if (d.getDate() == this.maxDate.getDate()) {\r\n              this.isClockIn = 1;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      // maxDate: new Date(new Date().valueOf() + 24 * 60 * 60 * 1000),\r\n      records: [],\r\n      days: 0,\r\n      totaldays: 2,\r\n      isClockIn: 0,\r\n      maxDate: new Date(),\r\n    };\r\n  },\r\n\r\n  mounted() {},\r\n\r\n  methods: {\r\n    formatter(day) {\r\n      const year = day.date.getFullYear();\r\n      const month = day.date.getMonth() + 1;\r\n      const date = day.date.getDate();\r\n      for (let i = 0; i < this.records.length; i++) {\r\n        // console.log(this.records[i]);\r\n        let d = new Date(this.records[i]);\r\n        if (year === d.getFullYear()) {\r\n          if (month === d.getMonth() + 1) {\r\n            if (date === d.getDate()) {\r\n              day.bottomInfo = \"已打卡\";\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      return day;\r\n    },\r\n    clockIn() {\r\n      if (store.state.id != \"\") {\r\n        clockIn(store.state.id).then((res) => {\r\n          console.log(res);\r\n          if (res.data.code == 200) {\r\n            this.$toast(\"打卡成功\");\r\n            this.isClockIn = 1;\r\n            this.$router.go(0);\r\n          }\r\n        });\r\n      } else {\r\n        this.$toast(\"请先登录\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#DemoIndex {\r\n  padding-top: 1rem;\r\n}\r\n.month,\r\n.total {\r\n  font-family: \"方正舒体\";\r\n  font-size: 1rem;\r\n  padding: 0.5rem;\r\n  text-align: center;\r\n}\r\n.total {\r\n  color: #aaa;\r\n}\r\n.month span,\r\n.total span {\r\n  font-weight: 700;\r\n  color: red;\r\n}\r\n.button {\r\n  padding: 0 3rem;\r\n  padding-top: 0.5rem;\r\n  text-align: center;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=20bd8dd8&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=20bd8dd8&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"20bd8dd8\",\n  null\n  \n)\n\nexport default component.exports","const store = {\r\n    debug: true,\r\n  \r\n    state: {\r\n        id:localStorage.getItem('id')==null?'':localStorage.getItem('id'),\r\n        password:localStorage.getItem('password')==null?'':localStorage.getItem('password'),\r\n        phone:localStorage.getItem('phone')==null?'':localStorage.getItem('phone'),\r\n    },\r\n  \r\n    setMessageAction(id,password,phone) {\r\n      if (this.debug) {\r\n        console.log('setMessageAction triggered with', id)\r\n      }\r\n  \r\n      this.state.id = id;\r\n      this.state.password=password;\r\n      this.state.phone=phone;\r\n      localStorage.setItem('id',id);\r\n      localStorage.setItem('phone',phone);\r\n      localStorage.setItem('password',password);\r\n    },\r\n  \r\n    clearMessageAction() {\r\n      if (this.debug) {\r\n        console.log('clearMessageAction triggered')\r\n      }\r\n      localStorage.clear();\r\n      this.state.id = ''\r\n      this.state.password = ''\r\n      this.state.phone = ''\r\n    }\r\n}\r\nexport{store}"],"names":["render","_vm","this","_c","_self","attrs","maxDate","formatter","staticClass","_v","_s","days","domProps","records","length","isClockIn","on","$event","clockIn","staticRenderFns","id","Promise","resolve","reject","params","URLSearchParams","append","Date","axios","method","url","headers","data","then","res","catch","err","getUserRecords","name","console","d","totaldays","mounted","methods","day","component","store","debug","state","localStorage","getItem","password","phone","setMessageAction","log","setItem","clearMessageAction","clear"],"sourceRoot":""}