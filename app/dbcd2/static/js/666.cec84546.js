"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[666],{3666:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"whole"},[t("van-form",[t("van-cell-group",{attrs:{inset:""}},[t("van-field",{attrs:{name:"手机号",label:"手机号",placeholder:"请输入手机号",type:"tel",rules:[{pattern:e.phonepattern,message:"请填写合法的手机号"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),t("van-field",{attrs:{type:"password",name:"密码",placeholder:"请输入密码",label:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),t("div",{staticClass:"submit"},[t("div",{staticClass:"login"},[t("van-button",{attrs:{round:"",type:"primary",size:"large"},on:{click:function(t){return e.login()}}},[e._v(" 登录 ")])],1),t("div",{staticClass:"register"},[t("van-button",{attrs:{round:"",type:"warning",to:"/register",size:"large"}},[e._v(" 注册 ")])],1)])],1)],1)},n=[],o=a(6138),r=a(7378),l={name:"DemoLogin",data(){return{username:"",password:"",message:"",phonepattern:/(^|\s*\+?0?0?86|\D)(1\d{2})[-\s]{0,3}(\d{4})[-\s]{0,3}(\d{4})(?=\D|$)/}},mounted(){},methods:{login(){(0,r.x4)(this.username,this.password).then((e=>{console.log(e),200==e.data.code?(o.h.setMessageAction(e.data.data,this.password,this.username),this.$toast("登陆成功"),this.$router.push("/personal")):4002==e.data.code?(this.message=e.data.message,this.$toast(this.message)):this.$toast("登录失败")}))}}},i=l,d=a(1001),p=(0,d.Z)(i,s,n,!1,null,"c9366758",null),u=p.exports},7378:function(e,t,a){a.d(t,{$M:function(){return d},O:function(){return i},x4:function(){return l},z2:function(){return r}});var s=a(6138),n=a(9669),o=a.n(n);function r(e,t,a,s){const n=new FormData;return n.append("name",e),n.append("password",t),n.append("phone",a),0!=s.length?n.append("file",s[0].file):n.append("file",new File([],"")),new Promise(((e,t)=>{o()({method:"post",url:"user/register",data:n}).then((t=>{e(t)})).catch((e=>{t(e)}))}))}function l(e,t){const a=new URLSearchParams;return a.append("phone",e),a.append("password",t),new Promise(((e,t)=>{o()({method:"post",url:"user/login",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a}).then((t=>{e(t)})).catch((e=>{t(e)}))}))}function i(e){return new Promise(((t,a)=>{o()({method:"get",url:"user/message?id="+e}).then((e=>{t(e)})).catch((e=>{a(e)}))}))}function d(e,t,a,n,r){console.log(s.h.state.phone),parseInt(n)!=s.h.state.phone&&l.append("phone",n);const l=new FormData;return l.append("id",e),l.append("name",t),l.append("password",a),0!=r.length?l.append("file",r[0].file):l.append("file",new File([],"")),new Promise(((e,t)=>{o()({method:"post",url:"user/update",data:l}).then((t=>{e(t)})).catch((e=>{t(e)}))}))}o().defaults.baseURL="http://47.92.77.49:8080/",o().defaults.timeout=5e4},6138:function(e,t,a){a.d(t,{h:function(){return s}});const s={debug:!0,state:{id:null==localStorage.getItem("id")?"":localStorage.getItem("id"),password:null==localStorage.getItem("password")?"":localStorage.getItem("password"),phone:null==localStorage.getItem("phone")?"":localStorage.getItem("phone")},setMessageAction(e,t,a){this.debug&&console.log("setMessageAction triggered with",e),this.state.id=e,this.state.password=t,this.state.phone=a,localStorage.setItem("id",e),localStorage.setItem("phone",a),localStorage.setItem("password",t)},clearMessageAction(){this.debug&&console.log("clearMessageAction triggered"),localStorage.clear(),this.state.id="",this.state.password="",this.state.phone=""}}}}]);
//# sourceMappingURL=666.cec84546.js.map