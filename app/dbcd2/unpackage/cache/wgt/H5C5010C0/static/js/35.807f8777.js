"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[35],{5035:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"box"},[t("van-list",{attrs:{finished:e.allrecords.finished,"finished-text":"已经到底了哦"},on:{load:e.onLoad},model:{value:e.allrecords.loading,callback:function(t){e.$set(e.allrecords,"loading",t)},expression:"allrecords.loading"}},e._l(e.allrecords.data,(function(n){return t("div",{key:n.id,staticClass:"whole",on:{click:function(t){return e.toDetails(n.id)}}},[t("div",{staticClass:"title"},[e._v(e._s(n.title))]),t("div",{staticClass:"content"},[t("span",{staticClass:"date",domProps:{textContent:e._s(e.getDate(n.date))}}),e._v("| "),t("span",{staticClass:"article ellipsis"},[e._v(e._s(n.content))])])])})),0)],1)},r=[],o=n(6113),i={name:"DemoSearchArticles",created(){console.log(this.value),this.allrecords.finished=!1,this.onLoad()},beforeRouteUpdate(e,t,n){n(),this.value=this.$route.query.name,this.allrecords.data.length=0,this.allrecords.cnt=0,this.allrecords.finished=!1,this.onLoad()},data(){return{allrecords:{code:"",data:[],loading:!1,finished:!1,cnt:0},value:this.$route.query.name}},computed:{key(){return void 0!==this.$route.name?this.$route.query.name+new Date:this.$route+new Date}},methods:{onLoadRecords(e,t){if(console.log(t),e.code=t.data.code,e.loading=!0,200==e.code){e.loading=!1;for(let n=0;n<10;n++)e.data.length<t.data.data.length&&(e.data[e.cnt]=t.data.data[e.cnt],e.cnt++);e.loading=!1,t.data.data.length<=e.data.length?e.finished=!0:e.finished=!1}},onLoad(){setTimeout((()=>{(0,o.Kp)(this.value).then((e=>{this.onLoadRecords(this.allrecords,e)}))}),1e3)},getDate(e){let t=new Date(e);return t.getFullYear()+"年"+(t.getMonth()+1)+"月"+t.getDate()+"日"},toDetails(e){this.$router.push("/articledetails/"+e)}}},l=i,s=n(1001),d=(0,s.Z)(l,a,r,!1,null,"55b67b80",null),c=d.exports},6113:function(e,t,n){n.d(t,{Kp:function(){return l},T9:function(){return o},XP:function(){return s},kl:function(){return d},qM:function(){return c},te:function(){return i}});var a=n(9669),r=n.n(a);function o(){return new Promise(((e,t)=>{r()({method:"get",url:"article/allArticles"}).then((t=>{e(t)})).catch((e=>{t(e)}))}))}function i(e,t){return new Promise(((n,a)=>{r()({method:"get",url:"article/userArticles?userId="+t+"&tag="+e}).then((e=>{n(e)})).catch((e=>{a(e)}))}))}function l(e){return new Promise(((t,n)=>{r()({method:"get",url:"article/searchByName?name="+e}).then((e=>{t(e)})).catch((e=>{n(e)}))}))}function s(e){return new Promise(((t,n)=>{r()({method:"get",url:"article/searchById?id="+e}).then((e=>{t(e)})).catch((e=>{n(e)}))}))}function d(e){return new Promise(((t,n)=>{const a=new URLSearchParams;a.append("id",e),r()({method:"post",url:"article/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a}).then((e=>{t(e)})).catch((e=>{n(e)}))}))}function c(e,t,n,a,o){o=0==o?0:1;const i=new FormData;i.append("userId",e),i.append("title",t),i.append("content",n);for(let r=0;r<a.length;r++)i.append("file",a[r].file);return 0==a.length&&i.append("file",new File([],"")),i.append("isprivate",o),new Promise(((e,t)=>{r()({method:"post",url:"article/add",data:i}).then((t=>{e(t)})).catch((e=>{t(e)}))}))}r().defaults.baseURL="http://47.92.77.49:8080/",r().defaults.timeout=5e4}}]);
//# sourceMappingURL=35.807f8777.js.map