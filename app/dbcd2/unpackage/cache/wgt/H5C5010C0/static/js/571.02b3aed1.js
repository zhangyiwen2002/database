"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[571],{5571:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"box"},[e("van-list",{attrs:{finished:t.allrecords.finished,"finished-text":"已经到底了哦"},on:{load:t.onLoad},model:{value:t.allrecords.loading,callback:function(e){t.$set(t.allrecords,"loading",e)},expression:"allrecords.loading"}},t._l(t.allrecords.data,(function(a){return e("van-swipe-cell",{key:a.id,scopedSlots:t._u([{key:"right",fn:function(){return[e("van-button",{staticClass:"delete-button",style:{height:"80px"},attrs:{square:"",text:"删除",type:"danger"},on:{click:function(e){return t.deleteArticle(a.id)}}})]},proxy:!0}],null,!0)},[e("div",{staticClass:"whole",on:{click:function(e){return t.toDetails(a.id)}}},[e("div",{staticClass:"title"},[t._v(t._s(a.title))]),e("div",{staticClass:"content"},[e("span",{staticClass:"date",domProps:{textContent:t._s(t.getDate(a.date))}}),t._v("| "),e("span",{staticClass:"article ellipsis"},[t._v(t._s(a.content))])])])])})),1)],1)},o=[],s=a(6138),l=a(6113),r={name:"DemoAllArticles",created(){},data(){return{allrecords:{code:"",data:[],loading:!1,finished:!1,cnt:0}}},mounted(){},methods:{onLoadRecords(t,e){if(console.log(e),t.code=e.data.code,t.loading=!0,200==t.code){t.loading=!1;for(let a=0;a<10;a++)t.data.length<e.data.data.length&&(t.data[t.cnt]=e.data.data[t.cnt],t.cnt++);t.loading=!1,e.data.data.length<=t.data.length?(t.finished=!0,t.cnt=0):t.finished=!1}},onLoad(){setTimeout((()=>{(0,l.te)(0,s.h.state.id).then((t=>{this.onLoadRecords(this.allrecords,t)}))}),1e3)},getDate(t){let e=new Date(t);return e.getFullYear()+"年"+(e.getMonth()+1)+"月"+e.getDate()+"日"},toDetails(t){this.$router.push("/articledetails/"+t)},deleteArticle(t){(0,l.kl)(t).then((t=>{console.log(t),200==t.data.code?(this.$toast("删除成功"),this.$router.go(0)):this.$toast("删除失败")}))}}},i=r,c=a(1001),d=(0,c.Z)(i,n,o,!1,null,"63f46604",null),u=d.exports},6113:function(t,e,a){a.d(e,{Kp:function(){return r},T9:function(){return s},XP:function(){return i},kl:function(){return c},qM:function(){return d},te:function(){return l}});var n=a(9669),o=a.n(n);function s(){return new Promise(((t,e)=>{o()({method:"get",url:"article/allArticles"}).then((e=>{t(e)})).catch((t=>{e(t)}))}))}function l(t,e){return new Promise(((a,n)=>{o()({method:"get",url:"article/userArticles?userId="+e+"&tag="+t}).then((t=>{a(t)})).catch((t=>{n(t)}))}))}function r(t){return new Promise(((e,a)=>{o()({method:"get",url:"article/searchByName?name="+t}).then((t=>{e(t)})).catch((t=>{a(t)}))}))}function i(t){return new Promise(((e,a)=>{o()({method:"get",url:"article/searchById?id="+t}).then((t=>{e(t)})).catch((t=>{a(t)}))}))}function c(t){return new Promise(((e,a)=>{const n=new URLSearchParams;n.append("id",t),o()({method:"post",url:"article/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:n}).then((t=>{e(t)})).catch((t=>{a(t)}))}))}function d(t,e,a,n,s){s=0==s?0:1;const l=new FormData;l.append("userId",t),l.append("title",e),l.append("content",a);for(let o=0;o<n.length;o++)l.append("file",n[o].file);return 0==n.length&&l.append("file",new File([],"")),l.append("isprivate",s),new Promise(((t,e)=>{o()({method:"post",url:"article/add",data:l}).then((e=>{t(e)})).catch((t=>{e(t)}))}))}o().defaults.baseURL="http://47.92.77.49:8080/",o().defaults.timeout=5e4},6138:function(t,e,a){a.d(e,{h:function(){return n}});const n={debug:!0,state:{id:null==localStorage.getItem("id")?"":localStorage.getItem("id"),password:null==localStorage.getItem("password")?"":localStorage.getItem("password"),phone:null==localStorage.getItem("phone")?"":localStorage.getItem("phone")},setMessageAction(t,e,a){this.debug&&console.log("setMessageAction triggered with",t),this.state.id=t,this.state.password=e,this.state.phone=a,localStorage.setItem("id",t),localStorage.setItem("phone",a),localStorage.setItem("password",e)},clearMessageAction(){this.debug&&console.log("clearMessageAction triggered"),localStorage.clear(),this.state.id="",this.state.password="",this.state.phone=""}}}}]);
//# sourceMappingURL=571.02b3aed1.js.map