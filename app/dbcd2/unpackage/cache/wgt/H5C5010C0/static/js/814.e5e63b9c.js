"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[814],{6814:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var o=function(){var e=this,t=e._self._c;return t("div",[t("van-nav-bar",{attrs:{title:"我要发表","left-text":"返回","left-arrow":""},on:{"click-left":e.onClickLeft},scopedSlots:e._u([{key:"right",fn:function(){return[t("van-icon",{attrs:{name:"success",size:"25"},on:{click:function(t){return e.submit()}}})]},proxy:!0}])}),t("van-form",{attrs:{size:"large"}},[t("van-cell-group",{attrs:{inset:""}},[t("van-field",{attrs:{name:"标题",placeholder:"请输入标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),t("van-field",{attrs:{autosize:"",rows:"4",type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),t("van-field",{attrs:{name:"switch",label:"私密上传"},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-switch",{attrs:{size:"20"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})]},proxy:!0}])}),t("van-field",{attrs:{name:"uploader"},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-uploader",{attrs:{multiple:""},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})]},proxy:!0}])})],1)],1)],1)},a=[],s=n(6113),l=n(6138),r={name:"DemoPublish",data(){return{content:"",title:"",checked:!1,fileList:[]}},mounted(){},methods:{onClickLeft(){this.$router.go(-1)},submit(){console.log(this.content),console.log(this.title),console.log(this.fileList),(0,s.qM)(l.h.state.id,this.title,this.content,this.fileList,this.checked).then((e=>{console.log(e),e&&e.data&&200==e.data.code?(this.$toast("发表成功"),this.$router.go(-1)):this.$toast("发表失败")}))}}},i=r,c=n(1001),u=(0,c.Z)(i,o,a,!1,null,"e4757792",null),d=u.exports},6113:function(e,t,n){n.d(t,{Kp:function(){return r},T9:function(){return s},XP:function(){return i},kl:function(){return c},qM:function(){return u},te:function(){return l}});var o=n(9669),a=n.n(o);function s(){return new Promise(((e,t)=>{a()({method:"get",url:"article/allArticles"}).then((t=>{e(t)})).catch((e=>{t(e)}))}))}function l(e,t){return new Promise(((n,o)=>{a()({method:"get",url:"article/userArticles?userId="+t+"&tag="+e}).then((e=>{n(e)})).catch((e=>{o(e)}))}))}function r(e){return new Promise(((t,n)=>{a()({method:"get",url:"article/searchByName?name="+e}).then((e=>{t(e)})).catch((e=>{n(e)}))}))}function i(e){return new Promise(((t,n)=>{a()({method:"get",url:"article/searchById?id="+e}).then((e=>{t(e)})).catch((e=>{n(e)}))}))}function c(e){return new Promise(((t,n)=>{const o=new URLSearchParams;o.append("id",e),a()({method:"post",url:"article/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:o}).then((e=>{t(e)})).catch((e=>{n(e)}))}))}function u(e,t,n,o,s){s=0==s?0:1;const l=new FormData;l.append("userId",e),l.append("title",t),l.append("content",n);for(let a=0;a<o.length;a++)l.append("file",o[a].file);return 0==o.length&&l.append("file",new File([],"")),l.append("isprivate",s),new Promise(((e,t)=>{a()({method:"post",url:"article/add",data:l}).then((t=>{e(t)})).catch((e=>{t(e)}))}))}a().defaults.baseURL="http://47.92.77.49:8080/",a().defaults.timeout=5e4},6138:function(e,t,n){n.d(t,{h:function(){return o}});const o={debug:!0,state:{id:null==localStorage.getItem("id")?"":localStorage.getItem("id"),password:null==localStorage.getItem("password")?"":localStorage.getItem("password"),phone:null==localStorage.getItem("phone")?"":localStorage.getItem("phone")},setMessageAction(e,t,n){this.debug&&console.log("setMessageAction triggered with",e),this.state.id=e,this.state.password=t,this.state.phone=n,localStorage.setItem("id",e),localStorage.setItem("phone",n),localStorage.setItem("password",t)},clearMessageAction(){this.debug&&console.log("clearMessageAction triggered"),localStorage.clear(),this.state.id="",this.state.password="",this.state.phone=""}}}}]);
//# sourceMappingURL=814.e5e63b9c.js.map